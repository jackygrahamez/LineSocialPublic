!function(e){e.fn.canvasLoader=function(t){function n(){for(i in r)r[i].draw()}var r=[],a={radius:20,color:"rgb(0,0,0)",dotRadius:2.5,backgroundColor:"transparent",className:"canvasLoader",id:"canvasLoader1",fps:10},o=e.extend(a,t);setInterval(n,1e3/o.fps);var s=function(e,t,n,r){for(this.ctx=e,this.radius=t,this.x=this.radius/2,this.y=this.radius/2,this.color=n,this.dotRadius=r,this.opacity=1,this.numDots=8,this.dots={},this.degrees=2*Math.PI/this.numDots,i=1;i<=this.numDots;i++)this.dots[i]=new c(Math.cos(this.degrees*i)*this.radius/Math.PI,Math.sin(this.degrees*i)*this.radius/Math.PI,this.dotRadius,this.color,i/this.numDots),this.dots[i].parent=this};s.prototype.draw=function(){this.ctx.clearRect(0,0,this.radius,this.radius),this.ctx.globalAlpha=1,this.ctx.fillStyle=o.backgroundColor,this.ctx.fillRect(0,0,this.radius,this.radius);for(i in this.dots)this.dots[i].changeOpacity(),this.dots[i].draw()};var c=function(e,t,n,i,r){this.radius=n,this.color=i,this.opacity=r,this.x=e,this.y=t};return c.prototype.draw=function(){this.parent.ctx.beginPath(),this.parent.ctx.globalAlpha=this.opacity,this.parent.ctx.fillStyle=this.color,this.parent.ctx.arc(this.x+this.parent.radius/2,this.y+this.parent.radius/2,this.radius,0,2*Math.PI,!0),this.parent.ctx.fill()},c.prototype.changeOpacity=function(){this.opacity-=1/this.parent.numDots,this.opacity<0&&(this.opacity=1)},e(this).each(function(){if("IMG"==this.tagName)e(this).load(function(){var n={radius:(e(this).width()+e(this).height())/2,dotRadius:(e(this).width()+e(this).height())/16,id:"canvasLoader"+(parseInt(e(".canvasLoader").size())+1)},i=e.extend(o,n,t),a=e("<canvas width='"+i.radius+"' height='"+i.radius+"' id='"+i.id+"' class='"+i.className+"'></canvas>"),c=a.get(0).getContext("2d");c&&(r[r.length+1]=new s(c,i.radius,i.color,i.dotRadius),e(this).replaceWith(a))});else{var n={radius:(e(this).width()+e(this).height())/2,dotRadius:(e(this).width()+e(this).height())/16,id:"canvasLoader"+(parseInt(e("."+o.className).size())+1)},i=e.extend(o,n,t),a=e("<canvas width='"+i.radius+"' height='"+i.radius+"' id='"+i.id+"' class='"+i.className+"'></canvas>"),c=a.get(0).getContext("2d");c&&(r[r.length+1]=new s(c,i.radius,i.color,i.dotRadius),e(this).replaceWith(a))}})}}(jQuery);