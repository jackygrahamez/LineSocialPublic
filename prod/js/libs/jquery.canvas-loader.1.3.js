!function(e){e.fn.canvasLoader=function(t){function n(){for(i in s)s[i].draw()}var s=[],r={radius:20,color:"rgb(0,0,0)",dotRadius:2.5,backgroundColor:"transparent",className:"canvasLoader",id:"canvasLoader1",fps:10},a=e.extend(r,t);setInterval(n,1e3/a.fps);var o=function(e,t,n,s){for(this.ctx=e,this.radius=t,this.x=this.radius/2,this.y=this.radius/2,this.color=n,this.dotRadius=s,this.opacity=1,this.numDots=8,this.dots={},this.degrees=2*Math.PI/this.numDots,i=1;i<=this.numDots;i++)this.dots[i]=new l(Math.cos(this.degrees*i)*this.radius/Math.PI,Math.sin(this.degrees*i)*this.radius/Math.PI,this.dotRadius,this.color,i/this.numDots),this.dots[i].parent=this};o.prototype.draw=function(){this.ctx.clearRect(0,0,this.radius,this.radius),this.ctx.globalAlpha=1,this.ctx.fillStyle=a.backgroundColor,this.ctx.fillRect(0,0,this.radius,this.radius);for(i in this.dots)this.dots[i].changeOpacity(),this.dots[i].draw()};var l=function(e,t,i,n,s){this.radius=i,this.color=n,this.opacity=s,this.x=e,this.y=t};return l.prototype.draw=function(){this.parent.ctx.beginPath(),this.parent.ctx.globalAlpha=this.opacity,this.parent.ctx.fillStyle=this.color,this.parent.ctx.arc(this.x+this.parent.radius/2,this.y+this.parent.radius/2,this.radius,0,2*Math.PI,!0),this.parent.ctx.fill()},l.prototype.changeOpacity=function(){this.opacity-=1/this.parent.numDots,this.opacity<0&&(this.opacity=1)},e(this).each(function(){if("IMG"==this.tagName)e(this).load(function(){var i={radius:(e(this).width()+e(this).height())/2,dotRadius:(e(this).width()+e(this).height())/16,id:"canvasLoader"+(parseInt(e(".canvasLoader").size())+1)},n=e.extend(a,i,t),r=e("<canvas width='"+n.radius+"' height='"+n.radius+"' id='"+n.id+"' class='"+n.className+"'></canvas>"),l=r.get(0).getContext("2d");l&&(s[s.length+1]=new o(l,n.radius,n.color,n.dotRadius),e(this).replaceWith(r))});else{var i={radius:(e(this).width()+e(this).height())/2,dotRadius:(e(this).width()+e(this).height())/16,id:"canvasLoader"+(parseInt(e("."+a.className).size())+1)},n=e.extend(a,i,t),r=e("<canvas width='"+n.radius+"' height='"+n.radius+"' id='"+n.id+"' class='"+n.className+"'></canvas>"),l=r.get(0).getContext("2d");l&&(s[s.length+1]=new o(l,n.radius,n.color,n.dotRadius),e(this).replaceWith(r))}})}}(jQuery);