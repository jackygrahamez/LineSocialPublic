jQuery.fn.motionCaptcha||function(a){function c(a){this.init(a)}a.fn.motionCaptcha=function(e,n){return this.each(function(){function i(a){var c,e;return a.touches&&a.touches.length>0?(c=a.touches[0].pageX-s.offset().left+m,e=a.touches[0].pageY-s.offset().top+u):a.offsetX?(c=a.offsetX-m,e=a.offsetY-u):(c=a.pageX-s.offset().left-m,e=a.pageY-s.offset().top-u),[c,e]}var l=a.extend({},a.fn.motionCaptcha.defaults,n);l.actionId="#"+l.actionId.replace(/\#/g,""),l.canvasId="#"+l.canvasId.replace(/\#/g,""),l.divId="#"+l.divId.replace(/\#/g,""),l.submitId=l.submitId?"#"+l.submitId.replace(/\#/g,""):!1;var t,o=(a("body"),a(this)),s=(a(l.divId),a(l.canvasId)),r=o.find('input[type="submit"]'),d=s.width(),g=s.height(),m=1*s.css("borderLeftWidth").replace("px",""),u=1*s.css("borderTopWidth").replace("px","");s[0].width=d,s[0].height=g;var h=s[0].getContext("2d");h.canvasWidth=d,h.canvasHeight=g,h.font=l.canvasFont,h.fillStyle=l.canvasTextColor,s.addClass(e);var f=!1,v=!1,y=[];t=new c(h);var b=function(c){c.preventDefault();var e=i(c),n=e[0],l=e[1];return f=!0,v=!0,a("body").addClass("mc-noselect"),h.clearRect(0,0,d,g),t.strokeStart(n,l),s.removeClass("mc-invalid mc-valid"),y=[[n,l]],!1},C=function(a){if(v)return v=0;if(f){a.preventDefault();var c=i(a),e=c[0],n=c[1];y.push([e,n]),t.stroke(e,n)}return!1},I=function(){if(f)if(f=!1,a("body").removeClass("mc-noselect"),y.length>=10){var c=o.find('input[name="_points"]'),e=[];for(p in y)e.push(y[p].join(","));e=e.join("|"),0==c.length?o.append(a("<input>").attr({name:"_points",type:"hidden",value:e})):c.val(e),r.removeAttr("disabled")}else r.attr("disabled","disabled");return!1};s.bind({mousedown:b,mousemove:C,mouseup:I}),s[0].addEventListener("touchstart",b,!1),s[0].addEventListener("touchmove",C,!1),s[0].addEventListener("touchend",I,!1),o.addClass(l.cssClass.replace(/\./,""))})},a.fn.motionCaptcha.defaults={actionId:"#mc-action",divId:"#mc",canvasId:"#mc-canvas",submitId:!1,cssClass:".mc-active",shapes:["triangle","x","rectangle","circle","check","caret","zigzag","arrow","leftbracket","rightbracket","v","delete","star","pigtail"],canvasFont:'15px "Lucida Grande"',canvasTextColor:"#111",errorMsg:"Please try again.",successMsg:"Captcha passed!",noCanvasMsg:"Your browser doesn't support <canvas> - try Chrome, FF4, Safari or IE9.",label:"<p>Please draw the shape in the box to submit the form:</p>",onSuccess:function(c){var e=this,n=e.submitId?c.find(e.submitId):c.find("input[type=submit]:disabled");c.attr("action",a(e.actionId).val()),n.prop("disabled",!1)},onError:function(){}},c.prototype={ctx:null,X:null,Y:null,painters:null,interval:null,init:function(a){function c(){var a;for(e.ctx.lineWidth=i,e.ctx.strokeStyle="rgba("+l[0]+", "+l[1]+", "+l[2]+", 0.06)",a=0;a<e.painters.length;a++)e.ctx.beginPath(),e.ctx.moveTo(e.painters[a].dx,e.painters[a].dy),e.painters[a].dx-=e.painters[a].ax=(e.painters[a].ax+(e.painters[a].dx-e.X)*e.painters[a].div)*e.painters[a].ease,e.painters[a].dy-=e.painters[a].ay=(e.painters[a].ay+(e.painters[a].dy-e.Y)*e.painters[a].div)*e.painters[a].ease,e.ctx.lineTo(e.painters[a].dx,e.painters[a].dy),e.ctx.stroke()}var e=this,n=navigator.userAgent.toLowerCase(),i=n.search("android")>-1||n.search("iphone")>-1?2:1,l=[0,0,0];this.ctx=a,this.ctx.globalCompositeOperation="source-over",this.X=this.ctx.canvasWidth/2,this.Y=this.ctx.canvasHeight/2,this.painters=[];for(var t=0;38>t;t++)this.painters.push({dx:this.ctx.canvasWidth/2,dy:this.ctx.canvasHeight/2,ax:0,ay:0,div:.1,ease:.18*Math.random()+.6});this.interval=setInterval(c,1e3/60)},destroy:function(){clearInterval(this.interval)},strokeStart:function(a,c){this.X=a,this.Y=c;for(var e=0;e<this.painters.length;e++)this.painters[e].dx=a,this.painters[e].dy=c;this.shouldDraw=!0},stroke:function(a,c){this.X=a,this.Y=c}}}(jQuery);
/*
//@ sourceMappingURL=motionCaptcha.js.map
*/
